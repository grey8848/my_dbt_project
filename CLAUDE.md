# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **dbt (Data Build Tool) project** - a SQL-based transformation workflow for analytics engineering. The project name is `my_dbt_project` (version 1.0.0). It's a starter/template project created with `dbt init`, containing minimal example models to demonstrate dbt functionality.

## Common Development Commands

### Core dbt Commands
- `dbt run` - Builds all models in the project
- `dbt test` - Runs data tests defined in schema.yml files
- `dbt compile` - Compiles SQL without executing (useful for debugging)
- `dbt debug` - Checks connection and configuration (run this first to verify setup)
- `dbt docs generate` - Generates documentation from schema.yml files
- `dbt docs serve` - Serves documentation locally (typically on port 8080)

### Development Workflow
- `dbt run --select model_name` - Run a specific model
- `dbt test --select model_name` - Test a specific model
- `dbt run --models +model_name` - Run a model and all its upstream dependencies
- `dbt seed` - Load seed data (none currently configured)
- `dbt snapshot` - Create snapshots (none currently configured)
- `dbt clean` - Remove compiled artifacts (target/ and dbt_packages/)

## Project Architecture

### Directory Structure
```
models/           # SQL models (primary development directory)
├── example/      # Example models (starter templates)
│   ├── my_first_dbt_model.sql
│   ├── my_second_dbt_model.sql
│   └── schema.yml # Model documentation and tests
analyses/         # Analysis SQL files
macros/           # Jinja macros (reusable SQL components)
seeds/            # CSV seed data files
snapshots/        # Type 2 slowly changing dimensions
tests/            # Custom data tests
target/           # Compiled artifacts (generated by dbt)
logs/             # Execution logs
```

### Key Configuration Files
- `dbt_project.yml` - Main project configuration (name, version, model paths, default materializations)
- `models/example/schema.yml` - Model documentation and data tests (unique, not_null)

### Current Models
1. **`my_first_dbt_model`** - Creates a table with sample data (id: 1 and null)
   - Materialized as a table (overrides default view configuration)
   - Contains commented example for filtering null values

2. **`my_second_dbt_model`** - References the first model using `{{ ref('my_first_dbt_model') }}`
   - Filters for `id = 1`
   - Demonstrates dbt model dependencies

### Materialization Strategy
- Default: Models in `example/` directory are configured to materialize as **views** (`+materialized: view` in dbt_project.yml)
- Override: Individual models can override this using `{{ config(materialized='table') }}` in SQL files

## Development Notes

### Environment
- dbt version: 1.11.2
- Python version: 3.10.16
- Profiles directory: `/home/jack111/.dbt/`
- Project uses standard dbt conventions and structure

### Testing
- Data tests are defined in `schema.yml` files using dbt's built-in test types (unique, not_null)
- Run `dbt test` to execute all tests
- Tests are configured for both example models on the `id` column

### Model Dependencies
- Use `{{ ref('model_name') }}` to reference other models (ensures proper dependency ordering)
- Use `{{ source('source_name', 'table_name') }}` to reference source data (not currently used)

### Adding New Models
1. Create SQL file in appropriate directory under `models/`
2. Add model documentation and tests in corresponding `schema.yml`
3. Configure materialization (view/table) using `{{ config() }}` macro or project defaults
4. Reference other models using `{{ ref() }}` for dependencies

### Project Expansion
This is a minimal starter project. To expand:
- Add actual data models in `models/` directory (organized by domain/business area)
- Configure external packages in `packages.yml` if needed
- Add seed data in `seeds/` directory
- Create custom macros in `macros/` for reusable logic
- Add custom tests in `tests/` directory